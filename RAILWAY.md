# Railway Deployment Guide

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Railway

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Railway CLI:**
   ```bash
   npm install -g @railway/cli
   ```

2. **–í–æ–π–¥–∏—Ç–µ –≤ Railway:**
   ```bash
   railway login
   ```

### –®–∞–≥–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
npm run build

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ
npm start
```

#### 2. –°–æ–∑–¥–∞–Ω–∏–µ Railway –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ Railway –ø—Ä–æ–µ–∫—Ç
railway init

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
railway new
```

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

```bash
# FatSecret API —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
railway variables set CLIENT_ID=your_fatsecret_client_id
railway variables set CLIENT_SECRET=your_fatsecret_client_secret

# –°—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
railway variables set NODE_ENV=production
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

```bash
# –¢–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è Poke (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
railway variables set MCP_AUTH_TOKEN=your_secure_auth_token_here
```

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

```bash
# –ü–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3000)
railway variables set PORT=3000

# –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º—É —Ñ–∞–π–ª—É
railway variables set CONFIG_PATH=/tmp/fatsecret-nutrition-config.json
```

**–ß–µ—Ä–µ–∑ Railway Dashboard:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Settings ‚Üí Variables
2. –î–æ–±–∞–≤—å—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   - `CLIENT_ID`: –í–∞—à FatSecret Client ID
   - `CLIENT_SECRET`: –í–∞—à FatSecret Client Secret
   - `NODE_ENV`: `production`
3. –î–æ–±–∞–≤—å—Ç–µ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
   - `MCP_AUTH_TOKEN`: –°–ª—É—á–∞–π–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
4. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:
   - `PORT`: `3000` (–æ–±—ã—á–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
   - `CONFIG_PATH`: `/tmp/fatsecret-nutrition-config.json`

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** 
- `CLIENT_ID` –∏ `CLIENT_SECRET` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ [FatSecret Platform](https://platform.fatsecret.com/)
- `MCP_AUTH_TOKEN` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞:** `openssl rand -hex 32` –∏–ª–∏ `node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"`

#### 4. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
npm run railway:deploy

# –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏
npm run railway:logs
```

### üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤–∞—à MCP —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

- **–û—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç:** `https://your-app.railway.app/sse`
- **Health check:** `https://your-app.railway.app/health`

## üìã –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—à–ø–∞—Ä–≥–∞–ª–∫–∞)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|----------|
| `CLIENT_ID` | ‚úÖ | `your_fatsecret_client_id` | FatSecret API Client ID |
| `CLIENT_SECRET` | ‚úÖ | `your_fatsecret_client_secret` | FatSecret API Client Secret |
| `NODE_ENV` | ‚úÖ | `production` | –†–µ–∂–∏–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è |
| `MCP_AUTH_TOKEN` | üîí | `your_secure_token` | –¢–æ–∫–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è |
| `PORT` | ‚ùå | `3000` | –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ |
| `CONFIG_PATH` | ‚ùå | `/tmp/fatsecret-nutrition-config.json` | –ü—É—Ç—å –∫ –∫–æ–Ω—Ñ–∏–≥—É |

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
railway variables set CLIENT_ID=your_fatsecret_client_id
railway variables set CLIENT_SECRET=your_fatsecret_client_secret
railway variables set NODE_ENV=production

# –î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
railway variables set MCP_AUTH_TOKEN=$(node -e "console.log(require('crypto').randomBytes(32).toString('hex'))")
```

### üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Poke

–í **Poke ‚Üí Settings ‚Üí Integrations** –¥–æ–±–∞–≤—å—Ç–µ:

**–ë–∞–∑–æ–≤—ã–π URL:**
```
https://your-app.railway.app/sse
```

**–° —Ç–æ–∫–µ–Ω–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```
https://your-app.railway.app/sse
```
–ò —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **API Key** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
- **API Key:** –≤–∞—à `MCP_AUTH_TOKEN`

**–ë–µ–∑ —Ç–æ–∫–µ–Ω–∞ (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ):**
```
https://your-app.railway.app/sse
```

**üîí –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `MCP_AUTH_TOKEN` –¥–ª—è production-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π!

### üìã –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
railway logs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoint
curl https://your-app.railway.app/health
```

#### –ú–µ—Ç—Ä–∏–∫–∏
- Railway –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Health checks –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —à–∏—Ñ—Ä—É—é—Ç—Å—è
- HTTPS –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

#### –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é —Å–±–æ—Ä–∫—É
   npm run build
   
   # –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à Railway
   railway rebuild
   ```

2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
   railway variables list
   
   # –û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
   railway variables set CLIENT_ID=new_value
   ```

3. **Timeout –æ—à–∏–±–∫–∏:**
   - Railway –∏–º–µ–µ—Ç —Ç–∞–π–º–∞—É—Ç 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –∫ FatSecret API –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
railway logs -f

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤
railway logs --grep "error"
```

### üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞
git add .
git commit -m "Update"
git push

# –ò–ª–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
railway up
```

### üìä –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- **–ú–∏–Ω–∏–º—É–º:** 1 instance
- **–ú–∞–∫—Å–∏–º—É–º:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Load balancing:** –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π

### üí° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
2. **Rate limiting:** –†–µ–∞–ª–∏–∑—É–π—Ç–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. **Monitoring:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ Railway

### üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- [Railway Documentation](https://docs.railway.app/)
- [FatSecret API Docs](https://platform.fatsecret.com/docs/)
- [Poke MCP Guide](https://poke.com/docs/mcp-guide)
